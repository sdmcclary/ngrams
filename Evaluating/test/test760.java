public class RackHttpServerChannelInitializer extends ChannelInitializer < Channel > { private final RackProxy rack ; private final boolean compressionEnabled ; public RackHttpServerChannelInitializer ( final RackProxy rack ) { this . rack = rack ; compressionEnabled = false ; } @ Override protected void initChannel ( Channel channel ) throws Exception { ChannelPipeline pipeline = channel . pipeline ( ) ; pipeline . addLast ( "decoder" , new HttpRequestDecoder ( ) ) . addLast ( "encoder" , new HttpResponseEncoder ( ) ) . addLast ( "chuckedWriter" , new ChunkedWriteHandler ( ) ) ; if ( compressionEnabled ) { pipeline . addLast ( "deflator" , new HttpContentCompressor ( ) ) . addLast ( "inflator" , new HttpContentDecompressor ( ) ) ; } pipeline . addLast ( new RackChannelInboundHandler ( rack ) ) ; } } 