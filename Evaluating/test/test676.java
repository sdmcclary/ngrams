public class MarshalBase64 implements Marshal { public static Class BYTE_ARRAY_CLASS = new byte [ 0 ] . getClass ( ) ; public Object readInstance ( XmlPullParser parser , String namespace , String name , PropertyInfo expected ) throws IOException , XmlPullParserException { return Base64 . decode ( parser . nextText ( ) ) ; } public void writeInstance ( XmlSerializer writer , Object obj ) throws IOException { writer . text ( Base64 . encode ( ( byte [ ] ) obj ) ) ; } public void register ( SoapSerializationEnvelope cm ) { cm . addMapping ( cm . xsd , "base64Binary" , MarshalBase64 . BYTE_ARRAY_CLASS , this ) ; cm . addMapping ( SoapEnvelope . ENC , "base64" , MarshalBase64 . BYTE_ARRAY_CLASS , this ) ; } } 