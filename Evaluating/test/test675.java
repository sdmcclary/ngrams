public class ParseStateChild implements IParseState { private IParseState _parent ; private List < IParseState > _children ; private IParseNodeFactory _parseNodeFactory ; private String language ; public ParseStateChild ( String language ) { this ( language , new ParseState ( ) ) ; } public ParseStateChild ( String language , IParseState parent ) { if ( parent == null ) { throw new NullPointerException ( Messages . ParseStateChild_ParseStateParentMustBeDefined ) ; } this . _parent = parent ; this . language = language ; parent . addChildState ( this ) ; } public void addChildState ( IParseState child ) { if ( this . _children == null ) { this . _children = new ArrayList < IParseState > ( ) ; } this . _children . add ( child ) ; } public void addCommentRegion ( IParseNode node ) { this . _parent . addCommentRegion ( node ) ; } public void addUpdateRegion ( IRange range ) { this . _parent . addUpdateRegion ( range ) ; } public void clearCommentRegions ( ) { this . _parent . clearCommentRegions ( ) ; } public void clearEditState ( ) { this . _parent . clearEditState ( ) ; } public void clearUpdateRegions ( ) { this . _parent . clearUpdateRegions ( ) ; } protected IParseNodeFactory createParseNodeFactory ( ) { return null ; } public IParseState [ ] getChildren ( ) { if ( this . _children == null ) { return null ; } return this . _children . toArray ( new IParseState [ 0 ] ) ; } public IParseNode [ ] getCommentRegions ( ) { return this . _parent . getCommentRegions ( ) ; } public int getFileIndex ( ) { return this . _parent . getFileIndex ( ) ; } public char [ ] getInsertedText ( ) { return this . _parent . getInsertedText ( ) ; } public String getLanguage ( ) { return language ; } public LexemeList getLexemeList ( ) { return this . _parent . getLexemeList ( ) ; } public IParseState getParent ( ) { return this . _parent ; } public IParseNodeFactory getParseNodeFactory ( ) { if ( this . _parseNodeFactory == null ) { this . _parseNodeFactory = this . createParseNodeFactory ( ) ; } return this . _parseNodeFactory ; } public IParseNode getParseResults ( ) { return this . _parent . getParseResults ( ) ; } public IParseState getParseState ( String language ) { if ( this . getLanguage ( ) . equals ( language ) ) { return this ; } else { return getParseState ( language , this . getChildren ( ) ) ; } } private IParseState getParseState ( String language , IParseState [ ] children ) { if ( children == null || children . length == 0 ) { return null ; } IParseState result = null ; for ( int i = 0 ; i < children . length ; i ++ ) { IParseState state = children [ i ] ; if ( state . getLanguage ( ) . equals ( language ) ) { result = state ; break ; } else { result = getParseState ( language , state . getChildren ( ) ) ; if ( result != null ) { break ; } } } return result ; } public long getParseTime ( ) { return this . _parent . getParseTime ( ) ; } public int getRemoveLength ( ) { return this . _parent . getRemoveLength ( ) ; } public IParseState getRoot ( ) { IParseState result = this ; while ( result . getParent ( ) != null ) { result = result . getParent ( ) ; } return result ; } public char [ ] getSource ( ) { return this . _parent . getSource ( ) ; } public int getStartingOffset ( ) { return this . _parent . getStartingOffset ( ) ; } public Map < Object , Object > getUpdatedProperties ( ) { return this . _parent . getUpdatedProperties ( ) ; } public IRange [ ] getUpdateRegions ( ) { return this . _parent . getUpdateRegions ( ) ; } public void onAfterParse ( ) { if ( this . _children != null ) { for ( int i = 0 ; i < this . _children . size ( ) ; i ++ ) { this . _children . get ( i ) . onAfterParse ( ) ; } } } public void onBeforeParse ( ) { if ( this . _children != null ) { for ( int i = 0 ; i < this . _children . size ( ) ; i ++ ) { this . _children . get ( i ) . onBeforeParse ( ) ; } } this . clearCommentRegions ( ) ; this . clearUpdateRegions ( ) ; } public void removeChildState ( IParseState child ) { if ( this . _children != null ) { this . _children . remove ( child ) ; } } public void reset ( ) { if ( this . _children != null ) { for ( int i = 0 ; i < this . _children . size ( ) ; i ++ ) { IParseState child = this . _children . get ( i ) ; child . reset ( ) ; } } } public void setEditState ( String source , String insertedSource , int offset , int removeLength ) { this . _parent . setEditState ( source , insertedSource , offset , removeLength ) ; } public void setFileIndex ( int index ) { this . _parent . setFileIndex ( index ) ; } public void setParseResults ( IParseNode results ) { this . _parent . setParseResults ( results ) ; } public void setParseTime ( long elapsedMilliseconds ) { this . _parent . setParseTime ( elapsedMilliseconds ) ; } public String toString ( ) { return this . _parent . toString ( ) ; } public void unloadFromEnvironment ( ) { } } 